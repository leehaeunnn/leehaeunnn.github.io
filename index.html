<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이하은 포트폴리오 | 전남과학고 학생 개발자</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="css/portfolio-style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="api-config.js" onerror="console.log('API config loading from localStorage')"></script>
    <script src="js/common-utils.js"></script>
    <style>
        :root {
            --primary-color: #1a1a2e;
            --secondary-color: #16213e;
            --accent-color: #e94560;
            --bg-color: #f5f5f5;
            --text-color: #333;
            --border-color: #e0e0e0;
            --section-bg: #ffffff;
            --card-bg: #ffffff;
            --hover-color: #c23651;
            --gradient-start: #1a1a2e;
            --gradient-end: #0f3460;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --card-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }

        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #4aa3df;
            --bg-color: #1a1a1a;
            --text-color: #ecf0f1;
            --border-color: #34495e;
            --section-bg: #2c3e50;
            --card-bg: #243342;
            --hover-color: #3498db;
            --gradient-start: #2c3e50;
            --gradient-end: #3498db;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --hover-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.8;
            color: #000000 !important;
            background-color: var(--bg-color);
            transition: all 0.3s ease;
            word-break: keep-all;
            word-wrap: break-word;
        }
        
        /* Force all text to be black */
        body:not(.dark-mode) p,
        body:not(.dark-mode) h2,
        body:not(.dark-mode) h3,
        body:not(.dark-mode) h4,
        body:not(.dark-mode) h5,
        body:not(.dark-mode) h6,
        body:not(.dark-mode) div,
        body:not(.dark-mode) span,
        body:not(.dark-mode) li,
        body:not(.dark-mode) td,
        body:not(.dark-mode) th,
        body:not(.dark-mode) label,
        body:not(.dark-mode) .intro-text,
        body:not(.dark-mode) .skill-category p,
        body:not(.dark-mode) .certificate-item p,
        body:not(.dark-mode) .certificate-info p,
        body:not(.dark-mode) .certificate-info h3,
        body:not(.dark-mode) .project-card p,
        body:not(.dark-mode) section p,
        body:not(.dark-mode) section span,
        body:not(.dark-mode) section div,
        body:not(.dark-mode) #about p,
        body:not(.dark-mode) #about h3 {
            color: #000000 !important;
        }
        
        /* Keep header and nav white */
        header h1,
        header .title,
        header p,
        nav a {
            color: #fff !important;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        nav {
            background: rgba(26, 26, 46, 0.95);
            padding: 0.8rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            gap: 2.5rem;
        }

        nav a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 400;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            position: relative;
        }

        nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--accent-color);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        nav a:hover::after {
            width: 100%;
        }

        nav a:hover {
            color: var(--accent-color);
            background: rgba(255,255,255,0.1);
        }

        header {
            padding: 6rem 0 3rem;
            text-align: center;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #fff;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.2) 0%, rgba(44, 62, 80, 0.2) 100%);
            z-index: 1;
        }

        .profile-container {
            position: relative;
            z-index: 2;
            margin-bottom: 2rem;
        }

        .profile-img {
            width: 220px;
            height: 220px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            margin-bottom: 2rem;
            transition: all 0.5s ease;
            object-fit: cover;
        }

        .profile-img:hover {
            transform: scale(1.05) rotate(5deg);
            border-color: var(--accent-color);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            letter-spacing: -1px;
        }

        .title {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
            font-weight: 300;
        }

        section {
            padding: 2.5rem 2rem;
            margin-bottom: 2rem;
            background: var(--section-bg);
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        section:hover::before {
            opacity: 1;
        }

        h2 {
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
            font-weight: 600;
        }

        h2::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -10px;
            width: 100%;
            height: 3px;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            border-radius: 2px;
        }

        .research-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .research-item {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .research-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: var(--accent-color);
        }

        .research-item h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }

        .research-item i {
            color: var(--accent-color);
            font-size: 1.5rem;
        }

        .publications {
            list-style: none;
        }

        .publications li {
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .publications li:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: var(--accent-color);
        }

        .publications h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }

        .publications i {
            color: var(--accent-color);
            font-size: 1.5rem;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1.2rem;
            padding: 1.8rem;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .contact-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: var(--accent-color);
        }

        .contact-item a {
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            flex-direction: column;
            word-break: break-all;
            overflow-wrap: break-word;
        }

        .contact-item a:hover {
            color: var(--accent-color);
            transform: translateY(-2px);
        }

        .address-detail {
            font-size: 0.85em;
            opacity: 0.8;
            margin-top: 0.3rem;
        }

        .contact-item i {
            font-size: 1.8rem;
            color: var(--accent-color);
            transition: all 0.3s ease;
            min-width: 2rem;
            text-align: center;
        }

        .contact-item:hover i {
            transform: scale(1.2);
            color: var(--hover-color);
        }

        .theme-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: #fff;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            z-index: 1000;
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(180deg);
        }

        footer {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            color: #fff;
            margin-top: 6rem;
        }

        @media (max-width: 768px) {
            nav ul {
                gap: 1rem;
            }

            nav a {
                font-size: 1rem;
                padding: 0.3rem 0.8rem;
            }

            header {
                padding: 8rem 0 4rem;
            }

            h1 {
                font-size: 2.8rem;
            }

            section {
                padding: 3rem 1.5rem;
            }

            .research-grid {
                grid-template-columns: 1fr;
            }

            .profile-img {
                width: 180px;
                height: 180px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2.3rem;
            }

            .title {
                font-size: 1.2rem;
            }

            section {
                padding: 2rem 1rem;
            }

            .theme-toggle {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }

        /* Smooth Scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-color);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--hover-color);
        }

        .project-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
        }

        .project-meta span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .project-meta i {
            font-size: 1rem;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-color);
            font-style: italic;
        }

        .publications li h3 a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s;
        }

        .publications li h3 a:hover {
            color: var(--hover-color);
        }

        .certificate-info {
            margin-top: 2.5rem;
            padding: 1.5rem;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .certificate-info:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: var(--accent-color);
        }

        .certificate-info h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }

        .certificate-info i {
            color: var(--accent-color);
            font-size: 1.5rem;
        }

        /* Guestbook Styles */
        .guestbook-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .guestbook-form {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            height: fit-content;
        }

        .guestbook-form h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-color);
            color: var(--text-color);
            font-family: 'Noto Sans KR', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .guestbook-messages {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border-color);
            max-height: 600px;
            overflow-y: auto;
        }

        .guestbook-messages h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-weight: 600;
            position: sticky;
            top: 0;
            background: var(--card-bg);
            padding-bottom: 1rem;
            z-index: 10;
        }

        .message-item {
            background: var(--bg-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .message-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-color: var(--accent-color);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .message-author {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .message-date {
            font-size: 0.85rem;
            color: var(--text-color);
            opacity: 0.7;
        }

        .message-content {
            color: var(--text-color);
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        @media (max-width: 768px) {
            .guestbook-container {
                grid-template-columns: 1fr;
            }

            .guestbook-messages {
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#about">소개</a></li>
            <li><a href="#research">연구</a></li>
            <li><a href="#publications">GitHub 프로젝트</a></li>
            <li><a href="#guestbook">방명록</a></li>
            <li><a href="#contact">연락처</a></li>
            <li><a href="chatbot.html">채팅</a></li>
            <li><a href="en.html">English</a></li>
        </ul>
    </nav>

    <header>
        <div class="profile-container">
            <h1>이하은</h1>
            <div class="title">고등학생</div>
            <div class="title">전남과학고등학교</div>
        </div>
    </header>

    <div class="container">
        <section id="about" data-aos="fade-up">
            <h2>소개</h2>
            <p>안녕하세요! 저는 전남과학고등학교에 재학 중인 학생입니다. 현재 Pre-SRP 프로그램에서부터 AI를 접목한 프로그래밍을 심화적으로 진행하고 있습니다.</p>
            <p>학교의 과학 연구 프로그램을 통해 다양한 코딩 프로젝트에 참여하며 실력을 쌓아가고 있습니다.</p>
            
            <div class="certificate-info" data-aos="fade-up">
                <h3><i class="fas fa-award"></i> 과학영재 반도체 연구 프로그램(Pre-SRP)</h3>
                <p>기간: 2024년 12월 16일 ~ 2025년 2월 23일</p>
                <p>연구주제: 미래 반도체 연구를 위한 AI 게임 제작 실습</p>
                <p>반도체 연구 분야에서 AI 기술을 활용한 게임 제작 실습을 통해 프로그래밍 역량을 강화했습니다.</p>
                <p>AI 기반 프로그래밍과 데이터 분석 중심의 과학 연구 프로그램을 성공적으로 이수했습니다.</p>
            </div>
            
            <div class="certificate-info" data-aos="fade-up">
                <h3><i class="fas fa-flask"></i> 과학영재 첨단연구실 체험캠프(Pre-URP)</h3>
                <p>기간: 2024년 6월 23일 ~ 2024년 9월 15일</p>
                <p>연구주제: TiO2 반도체 결정상 최적화를 통한 광전기화학적 그린수소 생산 연구</p>
                <p>이산화티타늄 반도체의 결정상 최적화를 통한 그린수소 생산 효율성 향상 연구에 참여했습니다.</p>
            </div>
        </section>

        <section id="research" data-aos="fade-up">
            <h2>배우고 있는 것들</h2>
            <div class="research-grid">
                <div class="research-item" data-aos="fade-up">
                    <h3><i class="fas fa-code"></i>웹 개발</h3>
                    <p>HTML, CSS, JavaScript를 배워서 제 웹사이트를 만들고 있어요. 사실 이 개인 사이트가 제 첫 주요 웹 프로젝트 중 하나랍니다!</p>
                </div>
                <div class="research-item" data-aos="fade-up">
                    <h3><i class="fas fa-brain"></i>기초 AI & 머신 러닝</h3>
                    <p>AI의 기초를 이해하기 위해 온라인 강좌를 듣고 있어요. scikit-learn 같은 파이썬 라이브러리를 사용해서 몇 가지 간단한 프로젝트를 만들었어요.</p>
                </div>
                <div class="research-item" data-aos="fade-up">
                    <h3><i class="fas fa-gamepad"></i>게임 개발</h3>
                    <p>여가 시간에 Unity를 사용해서 간단한 게임을 만들어 보고 있어요. 이번 학년 말까지 완전한 게임 하나를 만드는 것이 목표예요!</p>
                </div>
            </div>
        </section>

        <section id="publications" data-aos="fade-up">
            <h2>GitHub 프로젝트</h2>
            
            <!-- 주요 프로젝트 직접 링크 -->
            <div style="margin-bottom: 30px; display: flex; gap: 15px; flex-wrap: wrap;">
                <a href="math-scoring-upload.html" style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 25px; display: inline-block; transition: transform 0.3s;">
                    AI 수학 채점 시스템 (Gemini API)
                </a>
                <a href="projectile-simulator.html" style="padding: 10px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 25px; display: inline-block; transition: transform 0.3s;">
                    포물선 운동 시뮬레이터
                </a>
                <a href="chatbot.html" style="padding: 10px 20px; background: linear-gradient(135deg, #e94560 0%, #ff6b6b 100%); color: white; text-decoration: none; border-radius: 25px; display: inline-block; transition: transform 0.3s;">
                    <i class="fas fa-comments"></i> 이하은과 AI 채팅하기
                </a>
            </div>
            
            <div id="github-projects" class="publications">
                <div class="loading">프로젝트 불러오는 중...</div>
            </div>
        </section>

        <section id="guestbook" data-aos="fade-up">
            <h2>방명록</h2>
            <div class="guestbook-container">
                <div class="guestbook-form">
                    <h3><i class="fas fa-pen"></i> 메시지 남기기</h3>
                    <form id="guestbook-form">
                        <div class="form-group">
                            <label for="guest-name">이름</label>
                            <input type="text" id="guest-name" name="name" required maxlength="100" placeholder="이름을 입력하세요">
                        </div>
                        <div class="form-group">
                            <label for="guest-message">메시지</label>
                            <textarea id="guest-message" name="message" rows="4" required placeholder="메시지를 남겨주세요"></textarea>
                        </div>
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-paper-plane"></i> 메시지 남기기
                        </button>
                    </form>
                </div>
                
                <div class="guestbook-messages">
                    <h3><i class="fas fa-comments"></i> 방명록</h3>
                    <div id="messages-container">
                        <div class="loading">메시지 불러오는 중...</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" data-aos="fade-up">
            <h2>연락처</h2>
            <div class="contact-grid">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:leehan090301@gmail.com" title="이메일 보내기">leehan090301@gmail.com</a>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <a href="https://maps.google.com/?q=전남과학고등학교" target="_blank" title="구글 지도에서 보기">
                        전남과학고등학교<br>
                        <span class="address-detail">전라남도 나주시 금천면 오강길 33</span>
                    </a>
                </div>
                <div class="contact-item">
                    <i class="fab fa-github"></i>
                    <a href="https://github.com/leehaeunnn" target="_blank" title="GitHub 프로필 방문하기">github.com/leehaeunnn</a>
                </div>
            </div>
        </section>
    </div>

    <button class="theme-toggle" id="theme-toggle" title="다크 모드 전환">
        <i class="fas fa-moon"></i>
    </button>

    <footer>
        <p>&copy; 2025 이하은. All rights reserved.</p>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 100
        });

        // 방명록 기능 - Supabase 연동
        document.addEventListener('DOMContentLoaded', function() {
            // Supabase 설정
            const SUPABASE_URL = 'https://wdhipihtprfwciblzqpx.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkaGlwaWh0cHJmd2NpYmx6cXB4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyMDI1MjcsImV4cCI6MjA2OTc3ODUyN30.ZTdcCKVIeXlrYPbHxun7t4WRjwBleQIeesZ-XPkwLXI';
            
            // Supabase 클라이언트 초기화
            console.log('Supabase 초기화 시작');
            console.log('SUPABASE_URL:', SUPABASE_URL);
            console.log('SUPABASE_ANON_KEY:', SUPABASE_ANON_KEY.substring(0, 20) + '...');
            
            if (typeof supabase === 'undefined') {
                console.error('Supabase 라이브러리가 로드되지 않았습니다.');
                document.getElementById('messages-container').innerHTML = '<p style="text-align: center; color: red;">Supabase 라이브러리 로드 실패</p>';
                return;
            }
            
            const { createClient } = supabase;
            const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            console.log('Supabase 클라이언트 생성 완료');
            
            // 연결 테스트
            supabaseClient.from('leehaeunnn guest book').select('count').then(({ data, error }) => {
                if (error) {
                    console.error('Supabase 연결 테스트 실패:', error);
                } else {
                    console.log('Supabase 연결 테스트 성공');
                }
            });

            // 방명록 요소들
            const guestbookForm = document.getElementById('guestbook-form');
            const messagesContainer = document.getElementById('messages-container');

            // 메시지 불러오기
            async function loadMessages() {
                try {
                    const { data, error } = await supabaseClient
                        .from('leehaeunnn guest book')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) throw error;

                    messagesContainer.innerHTML = '';
                    
                    if (data.length === 0) {
                        messagesContainer.innerHTML = '<p style="text-align: center; color: var(--text-color); opacity: 0.7;">아직 작성된 메시지가 없습니다.</p>';
                        return;
                    }

                    data.forEach(message => {
                        const messageItem = createMessageElement(message);
                        messagesContainer.appendChild(messageItem);
                    });
                } catch (error) {
                    console.error('메시지 불러오기 오류:', error);
                    messagesContainer.innerHTML = '<p style="text-align: center; color: red;">메시지를 불러오는 중 오류가 발생했습니다.</p>';
                }
            }

            // 메시지 요소 생성
            function createMessageElement(message) {
                const messageItem = document.createElement('div');
                messageItem.className = 'message-item';
                messageItem.setAttribute('data-aos', 'fade-up');
                
                const date = new Date(message.created_at).toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                messageItem.innerHTML = `
                    <div class="message-header">
                        <span class="message-author">${escapeHtml(message.name)}</span>
                        <span class="message-date">${date}</span>
                    </div>
                    <div class="message-content">${escapeHtml(message.message)}</div>
                `;
                
                return messageItem;
            }

            // HTML 이스케이프
            function escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            }

            // 폼 제출 처리
            if (guestbookForm) {
                guestbookForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const submitBtn = e.target.querySelector('.submit-btn');
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 전송 중...';
                    
                    const formData = {
                        name: e.target.name.value,
                        message: e.target.message.value
                    };

                    try {
                        const { error } = await supabaseClient
                            .from('leehaeunnn guest book')
                            .insert([formData]);

                        if (error) throw error;

                        // 폼 초기화
                        e.target.reset();
                        
                        // 메시지 다시 불러오기
                        await loadMessages();
                        
                        // 성공 메시지 표시
                        alert('메시지가 성공적으로 등록되었습니다!');
                    } catch (error) {
                        console.error('메시지 저장 오류:', error);
                        console.error('오류 상세 정보:', error.message, error.details, error.hint);
                        alert(`메시지 저장 중 오류가 발생했습니다: ${error.message || '알 수 없는 오류'}`);
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> 메시지 남기기';
                    }
                });
            }

            // 페이지 로드 시 메시지 불러오기
            if (messagesContainer) {
                loadMessages();
            }
        })

        // GitHub Projects
        async function fetchGitHubProjects() {
            try {
                const username = 'leehaeunnn';
                const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=10`);
                const repos = await response.json();
                
                const projectsContainer = document.getElementById('github-projects');
                projectsContainer.innerHTML = '';

                // 프로젝트 설명 한국어로 변환
                const koreanDescriptions = {
                    'leehaeunnn.github.io': '개인 포트폴리오 웹사이트입니다. 웹 개발 기술과 디자인 요소를 활용하여 제 프로젝트와 연구 내용을 소개합니다.',
                    'Projectile-motion': '물리학의 포물선 운동을 시뮬레이션한 프로젝트입니다. 중력, 초기 속도 및 각도에 따른 물체 이동 경로를 계산합니다.',
                    'smartgrid-with-CRT': 'CRT 기술을 활용하여 에너지 배분을 최적화하고 재생 에너지원을 통합하는 스마트 그리드 시뮬레이션입니다. 수요 변동에 따라 동적으로 조정되며, 예측 분석을 통해 시스템의 그리드 복원력을 향상시키고 지속 가능한 자체 조절 에너지 네트워크 개발을 지원합니다.',
                    'Wimshusrt-Machine': '윔스허스트 발전기를 시뮬레이션한 프로젝트입니다. 두 개의 회전 디스크가 정전기를 유도하여 전하를 축적하는 과정을 재현하고, 브러시와 금속 구를 통해 이동하는 전하를 시각적으로 표현했습니다.',
                    'NEW-Math-Scoring': 'Next.js와 MongoDB를 활용한 온라인 수학 문제 채점 시스템입니다. LaTeX 수식을 지원하며 자동 채점과 상세한 피드백을 제공합니다.',
                    'Math-Scoring': 'Next.js와 MongoDB를 활용한 온라인 수학 문제 채점 시스템입니다. LaTeX 수식을 지원하며 자동 채점과 상세한 피드백을 제공합니다.'
                };

                repos.forEach(repo => {
                    if (!repo.fork) {  // Only show non-forked repositories
                        const projectElement = document.createElement('li');
                        projectElement.setAttribute('data-aos', 'fade-up');
                        
                        const technologies = repo.topics ? repo.topics.join(', ') : '미지정';
                        
                        // 한국어 설명 사용, 없으면 기본 설명 또는 기본 메시지 사용
                        const description = koreanDescriptions[repo.name] || repo.description || '설명이 없습니다';
                        
                        const updatedAt = new Date(repo.updated_at).toLocaleDateString('ko-KR', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });

                        // 프로젝트별 상세 페이지 링크 설정
                        let projectLink = repo.html_url;
                        let hasDetailPage = false;
                        
                        if (repo.name === 'NEW-Math-Scoring' || repo.name === 'Math-Scoring') {
                            projectLink = 'math-scoring-upload.html';
                            hasDetailPage = true;
                        } else if (repo.name === 'Projectile-motion') {
                            projectLink = 'projectile-simulator.html';
                            hasDetailPage = true;
                        }

                        projectElement.innerHTML = `
                            <h3>
                                <i class="fas fa-code-branch"></i>
                                ${hasDetailPage ? 
                                    `<a href="${projectLink}">${repo.name}</a>` :
                                    `<a href="${repo.html_url}" target="_blank" rel="noopener noreferrer">${repo.name}</a>`
                                }
                            </h3>
                            <p>${description}</p>
                            <div class="project-meta">
                                <span class="tech-stack">
                                    <i class="fas fa-tools"></i> 사용 기술: ${technologies}
                                </span>
                                <span class="last-updated">
                                    <i class="fas fa-calendar-alt"></i> 최근 업데이트: ${updatedAt}
                                </span>
                                <span class="stars">
                                    <i class="fas fa-star"></i> 스타 ${repo.stargazers_count}개
                                </span>
                            </div>
                        `;
                        
                        projectsContainer.appendChild(projectElement);
                    }
                });

                // If no projects found
                if (projectsContainer.children.length === 0) {
                    projectsContainer.innerHTML = '<p>프로젝트를 찾을 수 없습니다.</p>';
                }

            } catch (error) {
                console.error('GitHub 프로젝트 불러오기 오류:', error);
                document.getElementById('github-projects').innerHTML = 
                    '<p>프로젝트를 불러오는 중 오류가 발생했습니다. 나중에 다시 시도해주세요.</p>';
            }
        }

        // Fetch projects when page loads
        fetchGitHubProjects();

        // Theme toggle code
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');
        
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            themeIcon.classList.remove('fa-moon');
            themeIcon.classList.add('fa-sun');
        }
        
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });
    </script>
</body>
</html>
